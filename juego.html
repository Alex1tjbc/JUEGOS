<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>El Magnate</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;800&display=swap" rel="stylesheet">
    <style>
        :root {
            --primary: #f1c40f; /* Dorado */
            --danger: #e74c3c;
            --success: #2ecc71;
            --dark: #1a1a1a;
            --card-bg: #2c2c2c;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--dark);
            color: white;
            text-align: center;
            margin: 0;
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        /* --- PANTALLA 1: SELECCI√ìN --- */
        #screen-select {
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .card {
            background: var(--card-bg);
            border-radius: 15px;
            overflow: hidden;
            position: relative;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid transparent;
        }

        .card:active { transform: scale(0.98); }
        .card img { width: 100%; height: 120px; object-fit: cover; opacity: 0.7; }
        .card-info { padding: 15px; position: absolute; bottom: 0; width: 100%; background: linear-gradient(transparent, black); text-align: left; }
        .card h3 { margin: 0; font-size: 1.5rem; color: var(--primary); }
        .card p { margin: 0; font-size: 0.9rem; color: #ddd; }

        /* --- PANTALLA 2: JUEGO --- */
        #screen-game {
            flex: 1;
            display: none; /* Oculto al inicio */
            flex-direction: column;
            justify-content: space-between;
            padding: 20px;
            background-size: cover;
            background-position: center;
            position: relative;
        }

        /* Oscurecer fondo de juego */
        #screen-game::before {
            content: ''; position: absolute; top:0; left:0; right:0; bottom:0;
            background: rgba(0,0,0,0.85); z-index: 0;
        }
        
        .game-content { position: relative; z-index: 1; display: flex; flex-direction: column; height: 100%; }

        .target-display { text-align: right; font-size: 0.9rem; color: #aaa; margin-bottom: 10px; }
        
        .money-display { 
            font-size: 3.5rem; 
            font-weight: 800; 
            color: var(--primary);
            text-shadow: 0 0 20px rgba(241, 196, 15, 0.3);
            margin: 10px 0;
        }

        .progress-container {
            width: 100%; height: 20px; background: #444; border-radius: 10px; overflow: hidden; margin-bottom: 20px;
        }
        .progress-bar {
            height: 100%; width: 0%; background: var(--success); transition: width 0.3s ease;
            box-shadow: 0 0 10px var(--success);
        }

        .event-log {
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: #ff9;
            font-style: italic;
            min-height: 60px;
        }

        .risk-badge {
            background: rgba(255,0,0,0.2);
            padding: 5px 15px;
            border-radius: 20px;
            display: inline-block;
            border: 1px solid var(--danger);
            color: var(--danger);
            font-weight: bold;
        }

        /* Bot√≥n Principal */
        #btn-action {
            width: 100%;
            padding: 25px;
            font-size: 1.5rem;
            font-weight: 800;
            border: none;
            border-radius: 50px;
            background: linear-gradient(45deg, #f39c12, #d35400);
            color: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.5);
            cursor: pointer;
            margin-bottom: 20px;
            transition: all 0.2s;
        }
        #btn-action:active { transform: scale(0.95); }

        /* Estado: Ganador/Perdedor */
        #screen-result {
            display: none;
            flex: 1;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            padding: 30px;
        }
        .result-title { font-size: 3rem; margin-bottom: 10px; }
        .btn-restart { padding: 15px 30px; background: transparent; border: 2px solid white; color: white; border-radius: 30px; font-size: 1.2rem; margin-top: 30px;}

        /* Animaciones */
        .shake { animation: shake 0.5s; }
        @keyframes shake {
            0% { transform: translate(1px, 1px) rotate(0deg); }
            10% { transform: translate(-1px, -2px) rotate(-1deg); }
            20% { transform: translate(-3px, 0px) rotate(1deg); }
            30% { transform: translate(3px, 2px) rotate(0deg); }
            40% { transform: translate(1px, -1px) rotate(1deg); }
            50% { transform: translate(-1px, 2px) rotate(-1deg); }
            60% { transform: translate(-3px, 1px) rotate(0deg); }
            70% { transform: translate(3px, 1px) rotate(-1deg); }
            80% { transform: translate(-1px, -1px) rotate(1deg); }
            90% { transform: translate(1px, 2px) rotate(0deg); }
            100% { transform: translate(1px, -2px) rotate(-1deg); }
        }

    </style>
</head>
<body>

    <div id="screen-select">
        <h2>¬øCu√°l es tu sue√±o?</h2>
        <p style="color:#aaa; margin-top:-10px;">Elige sabiamente. Sue√±os grandes traen riesgos grandes.</p>
        
        <div class="card" onclick="iniciarJuego('viaje')">
            <img src="https://images.unsplash.com/photo-1502602898657-3e91760cbb34?auto=format&fit=crop&w=600&q=80" alt="Par√≠s">
            <div class="card-info">
                <h3>Viaje a Europa</h3>
                <p>Meta: $10,000 | Riesgo: Bajo</p>
            </div>
        </div>

        <div class="card" onclick="iniciarJuego('auto')">
            <img src="https://images.unsplash.com/photo-1503376763036-066120622c74?auto=format&fit=crop&w=600&q=80" alt="Auto">
            <div class="card-info">
                <h3>Auto Deportivo</h3>
                <p>Meta: $50,000 | Riesgo: Medio</p>
            </div>
        </div>

        <div class="card" onclick="iniciarJuego('casa')">
            <img src="https://images.unsplash.com/photo-1600596542815-2250651d2116?auto=format&fit=crop&w=600&q=80" alt="Casa">
            <div class="card-info">
                <h3>Mansi√≥n de Lujo</h3>
                <p>Meta: $250,000 | Riesgo: Alto</p>
            </div>
        </div>

        <div class="card" onclick="iniciarJuego('empresa')">
            <img src="https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?auto=format&fit=crop&w=600&q=80" alt="Edificio">
            <div class="card-info">
                <h3>Imperio Global</h3>
                <p>Meta: $1,000,000 | Riesgo: Extremo</p>
            </div>
        </div>
    </div>

    <div id="screen-game">
        <div class="game-content">
            <div class="target-display">META: <span id="target-amount">$0</span></div>
            
            <div style="flex:1; display:flex; flex-direction:column; justify-content:center;">
                <p class="risk-badge">RIESGO ACTUAL: <span id="risk-val">0</span>%</p>
                <div class="money-display" id="current-money">$1,000</div>
                <div class="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="event-log" id="event-log">Toca el bot√≥n para invertir...</div>
            </div>

            <button id="btn-action" onclick="jugarTurno()">üíµ INVERTIR</button>
        </div>
    </div>

    <div id="screen-result">
        <div style="font-size: 5rem;" id="res-icon"></div>
        <h1 class="result-title" id="res-title"></h1>
        <p id="res-desc" style="font-size: 1.2rem; opacity: 0.8;"></p>
        <button class="btn-restart" onclick="location.reload()">Intentar de nuevo</button>
    </div>

    <script>
        // Configuraci√≥n de los Objetivos
        const OBJETIVOS = {
            'viaje': { nombre: 'Viaje a Europa', meta: 10000, img: 'url(https://images.unsplash.com/photo-1502602898657-3e91760cbb34?auto=format&fit=crop&w=1080&q=80)', baseRisk: 4 },
            'auto': { nombre: 'Auto Deportivo', meta: 50000, img: 'url(https://images.unsplash.com/photo-1503376763036-066120622c74?auto=format&fit=crop&w=1080&q=80)', baseRisk: 6 },
            'casa': { nombre: 'Mansi√≥n', meta: 250000, img: 'url(https://images.unsplash.com/photo-1600596542815-2250651d2116?auto=format&fit=crop&w=1080&q=80)', baseRisk: 8 },
            'empresa': { nombre: 'Imperio', meta: 1000000, img: 'url(https://images.unsplash.com/photo-1486406146926-c627a92ad1ab?auto=format&fit=crop&w=1080&q=80)', baseRisk: 10 }
        };

        // Frases de bancarrota (Obst√°culos)
        const CAUSAS_MUERTE = [
            "¬°Hacienda congel√≥ tus cuentas!",
            "¬°Tu socio huy√≥ con el dinero!",
            "¬°El mercado de valores colaps√≥!",
            "¬°Invertiste en una estafa piramidal!",
            "¬°Demanda millonaria de tu ex!",
            "¬°Crisis econ√≥mica global!"
        ];

        // Frases de √©xito parcial
        const EVENTOS_POSITIVOS = [
            "¬°Acciones subieron!", "¬°Buen negocio!", "¬°Ganancia r√°pida!", "¬°Suerte!", "¬°Dividendo cobrado!"
        ];

        let estado = {
            dinero: 1000,
            meta: 0,
            riesgo: 0,
            seleccion: null,
            turno: 0
        };

        function iniciarJuego(tipo) {
            estado.seleccion = OBJETIVOS[tipo];
            estado.meta = estado.seleccion.meta;
            estado.riesgo = 0;
            estado.dinero = 1000;
            estado.turno = 0;

            // UI Switch
            document.getElementById('screen-select').style.display = 'none';
            document.getElementById('screen-game').style.display = 'flex';
            document.getElementById('screen-game').style.backgroundImage = estado.seleccion.img;
            document.getElementById('target-amount').innerText = "$" + estado.meta.toLocaleString();
            
            actualizarUI();
        }

        function jugarTurno() {
            // Verificar si el bot√≥n es de COMPRAR (Victoria)
            if (estado.dinero >= estado.meta) {
                finalizar(true);
                return;
            }

            // Aumentar Turno y Riesgo
            estado.turno++;
            // El riesgo sube m√°s r√°pido en niveles dif√≠ciles
            let incrementoRiesgo = estado.seleccion.baseRisk + (Math.random() * 2); 
            estado.riesgo += incrementoRiesgo;
            if (estado.riesgo > 90) estado.riesgo = 90; // Tope m√°ximo 90%

            // Calcular Probabilidad de Choque
            let suerte = Math.random() * 100;

            if (suerte < estado.riesgo) {
                // PERDI√ì
                finalizar(false);
            } else {
                // GAN√ì DINERO
                // Multiplicador aleatorio entre 1.3x y 2.0x
                let mult = 1.3 + Math.random();
                estado.dinero = Math.floor(estado.dinero * mult);
                
                // Mensaje aleatorio
                let msj = EVENTOS_POSITIVOS[Math.floor(Math.random() * EVENTOS_POSITIVOS.length)];
                document.getElementById('event-log').innerText = msj;
                
                actualizarUI();
            }
        }

        function actualizarUI() {
            document.getElementById('current-money').innerText = "$" + estado.dinero.toLocaleString();
            document.getElementById('risk-val').innerText = Math.floor(estado.riesgo);
            
            // Barra de progreso
            let porcentaje = (estado.dinero / estado.meta) * 100;
            if (porcentaje > 100) porcentaje = 100;
            document.getElementById('progress-bar').style.width = porcentaje + "%";

            // Cambiar Bot√≥n si alcanz√≥ la meta
            const btn = document.getElementById('btn-action');
            if (estado.dinero >= estado.meta) {
                btn.innerText = "¬°COMPRAR AHORA!";
                btn.style.background = "#2ecc71"; // Verde
                btn.classList.add('shake'); // Temblar de emoci√≥n
                document.getElementById('event-log').innerText = "¬°TIENES EL DINERO! ¬øTe arriesgas m√°s o compras?";
            } else {
                btn.innerText = "üíµ INVERTIR";
                btn.style.background = "linear-gradient(45deg, #f39c12, #d35400)";
                btn.classList.remove('shake');
            }
        }

        function finalizar(ganador) {
            document.getElementById('screen-game').style.display = 'none';
            const resScreen = document.getElementById('screen-result');
            resScreen.style.display = 'flex';

            if (ganador) {
                resScreen.style.backgroundColor = "#27ae60";
                document.getElementById('res-icon').innerText = "üèÜ";
                document.getElementById('res-title').innerText = "¬°COMPRADO!";
                document.getElementById('res-desc').innerText = "Eres due√±o de: " + estado.seleccion.nombre + ". Muestra tu pantalla a los dem√°s.";
            } else {
                resScreen.style.backgroundColor = "#c0392b";
                if(navigator.vibrate) navigator.vibrate(500);
                
                let causa = CAUSAS_MUERTE[Math.floor(Math.random() * CAUSAS_MUERTE.length)];
                
                document.getElementById('res-icon').innerText = "üí∏";
                document.getElementById('res-title').innerText = "BANCARROTA";
                document.getElementById('res-desc').innerText = causa;
            }
        }
    </script>
</body>
</html>
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(2px);
        }

        /* --- ESTADOS DEL JUEGO (FONDOS) --- */
        /* Estado: JUGANDO (Imagen de servidor/b√≥veda digital) */
        body.playing {
            background-image: url('https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1080&q=80');
            color: var(--neon-blue);
        }

        /* Estado: ESCAPASTE (Imagen de dinero/lujo) */
        body.safe {
            background-image: url('https://images.unsplash.com/photo-1579621970563-ebec7560ff3e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1080&q=80');
            color: var(--neon-green);
        }
        body.safe .overlay { background-color: rgba(0, 50, 0, 0.8); }

        /* Estado: ATRAPADO (Imagen de luces de polic√≠a/rejas) */
        body.dead {
            background-image: url('https://images.unsplash.com/photo-1473893604213-3df9c456178c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1080&q=80');
            color: var(--neon-red);
            animation: alarm-pulse 0.8s infinite alternate;
        }
        body.dead .overlay { background-color: rgba(50, 0, 0, 0.8); }
        
        @keyframes alarm-pulse {
            from { box-shadow: inset 0 0 0px var(--neon-red); }
            to { box-shadow: inset 0 0 100px var(--neon-red); }
        }

        /* --- ELEMENTOS VISUALES --- */
        h1.main-score {
            font-size: 3.5rem;
            margin: 10px 0;
            text-shadow: 0 0 10px currentColor;
        }

        .main-icon { font-size: 4rem; margin-bottom: 10px; display: block; }

        .data-panel {
            background: rgba(255,255,255,0.1);
            border: 1px solid currentColor;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            width: 80%;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }
        
        .risk-meter { font-size: 1.2rem; font-weight: bold; }
        
        /* --- BOTONES --- */
        .btn-container {
            display: flex;
            gap: 10px;
            width: 100%;
            max-width: 400px;
        }

        button {
            flex: 1;
            padding: 20px 10px;
            font-size: 1.1rem;
            margin: 10px 0;
            border: 2px solid currentColor;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Share Tech Mono', monospace;
            text-transform: uppercase;
            transition: transform 0.1s, box-shadow 0.3s;
        }
        button:active { transform: scale(0.95); }

        .btn-hack { 
            background: linear-gradient(45deg, #000, #004e92); color: var(--neon-blue); border-color: var(--neon-blue);
            box-shadow: 0 0 10px var(--neon-blue);
        }
        .btn-escape { 
            background: linear-gradient(45deg, #000, #11998e); color: var(--neon-green); border-color: var(--neon-green);
            box-shadow: 0 0 10px var(--neon-green);
        }
        .btn-reset { 
            background: transparent; color: white; border: 1px solid white; margin-top: 30px; width: auto; padding: 10px 30px;
        }

        .hidden { display: none !important; }
        .blink { animation: blinker 1s linear infinite; }
        @keyframes blinker { 50% { opacity: 0; } }
    </style>
</head>
<body class="playing">
    <div class="overlay">

        <div id="ui-play">
            <span class="main-icon">üíª</span>
            <p>SISTEMA: HACKEANDO...</p>
            <p>BOT√çN ACUMULADO:</p>
            <h1 id="score" class="main-score">$100</h1>
            
            <div class="data-panel">
                <p>NIVEL DE SEGURIDAD: <span id="level">1</span></p>
                <p class="risk-meter">RIESGO DE DETECCI√ìN: <span id="risk-text">0%</span> <span class="blink">‚ö†Ô∏è</span></p>
            </div>
            
            <div class="btn-container">
                <button class="btn-escape" onclick="plantarse()">üèÉ‚Äç‚ôÇÔ∏è ESCAPAR AHORA</button>
                <button class="btn-hack" onclick="avanzar()">üí∏ HACKEAR M√ÅS</button>
            </div>
        </div>

        <div id="ui-end" class="hidden">
            <span id="end-icon" class="main-icon"></span>
            <h1 id="end-title" class="main-score"></h1>
            <h2 id="end-score"></h2>
            <div class="data-panel">
                <p id="end-msg"></p>
            </div>
            <button class="btn-reset" onclick="reiniciar()">REINICIAR SISTEMA</button>
        </div>

    </div>

    <script>
        let nivel = 1;
        let dinero = 100;
        let juegoActivo = true;

        function actualizarUI() {
            let riesgo = (nivel - 1) * 18; // Aument√© un poco el riesgo para hacerlo m√°s r√°pido
            if(riesgo > 98) riesgo = 98;
            
            document.getElementById('score').innerText = "$" + dinero.toLocaleString();
            document.getElementById('level').innerText = nivel;
            document.getElementById('risk-text').innerText = riesgo + "%";
            
            // Cambiar icono seg√∫n el riesgo
            const icon = document.querySelector('#ui-play .main-icon');
            if (riesgo < 30) icon.innerText = 'üíª';
            else if (riesgo < 60) icon.innerText = 'üîì';
            else icon.innerText = 'üíÄ';
        }

        function avanzar() {
            if (!juegoActivo) return;

            let probabilidadMuerte = (nivel - 1) * 0.18; 
            let suerte = Math.random();

            if (suerte < probabilidadMuerte) {
                morir();
            } else {
                nivel++;
                // Multiplicador de dinero variable para m√°s emoci√≥n
                const multiplicador = [1.5, 1.8, 2.0][Math.floor(Math.random() * 3)];
                dinero = Math.floor(dinero * multiplicador);
                actualizarUI();
            }
        }

        function plantarse() {
            if (!juegoActivo) return;
            finalizarJuego(true);
        }

        function morir() {
            if (navigator.vibrate) navigator.vibrate([500, 100, 500]); // Doble vibraci√≥n
            finalizarJuego(false);
        }

        function finalizarJuego(escapo) {
            juegoActivo = false;
            document.getElementById('ui-play').classList.add('hidden');
            document.getElementById('ui-end').classList.remove('hidden');

            if (escapo) {
                document.body.className = "safe";
                document.getElementById('end-icon').innerText = "ü§ë";
                document.getElementById('end-title').innerText = "¬°ESCAPE EXITOSO!";
                document.getElementById('end-score').innerText = "$" + dinero.toLocaleString();
                document.getElementById('end-msg').innerText = "El dinero est√° seguro. Muestra tu pantalla a los dem√°s.";
            } else {
                document.body.className = "dead";
                document.getElementById('end-icon').innerText = "üöî";
                document.getElementById('end-title').innerText = "¬°ATRAPADO!";
                document.getElementById('end-score').innerText = "$0";
                document.getElementById('end-msg').innerText = "La polic√≠a cibern√©tica te localiz√≥. Perdiste todo el bot√≠n.";
            }
        }

        function reiniciar() {
            nivel = 1;
            dinero = 100;
            juegoActivo = true;
            document.body.className = "playing";
            document.getElementById('ui-play').classList.remove('hidden');
            document.getElementById('ui-end').classList.add('hidden');
            actualizarUI();
        }

        // Iniciar
        actualizarUI();
    </script>
</body>
</html>
