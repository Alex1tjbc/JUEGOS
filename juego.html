<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Cyber Heist</title>
    <link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&display=swap" rel="stylesheet">
    <style>
        /* --- ESTILOS GENERALES --- */
        :root {
            --neon-blue: #00f3ff;
            --neon-green: #39ff14;
            --neon-red: #ff073a;
            --dark-bg: rgba(0, 0, 0, 0.85);
        }

        body {
            font-family: 'Share Tech Mono', monospace;
            text-align: center;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            color: white;
            background-color: black;
            background-size: cover;
            background-position: center;
            transition: all 0.5s ease;
            overflow: hidden;
        }

        /* Capa oscura para que el texto se lea bien sobre las im√°genes */
        .overlay {
            background-color: var(--dark-bg);
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            backdrop-filter: blur(2px);
        }

        /* --- ESTADOS DEL JUEGO (FONDOS) --- */
        /* Estado: JUGANDO (Imagen de servidor/b√≥veda digital) */
        body.playing {
            background-image: url('https://images.unsplash.com/photo-1526374965328-7f61d4dc18c5?ixlib=rb-4.0.3&auto=format&fit=crop&w=1080&q=80');
            color: var(--neon-blue);
        }

        /* Estado: ESCAPASTE (Imagen de dinero/lujo) */
        body.safe {
            background-image: url('https://images.unsplash.com/photo-1579621970563-ebec7560ff3e?ixlib=rb-4.0.3&auto=format&fit=crop&w=1080&q=80');
            color: var(--neon-green);
        }
        body.safe .overlay { background-color: rgba(0, 50, 0, 0.8); }

        /* Estado: ATRAPADO (Imagen de luces de polic√≠a/rejas) */
        body.dead {
            background-image: url('https://images.unsplash.com/photo-1473893604213-3df9c456178c?ixlib=rb-4.0.3&auto=format&fit=crop&w=1080&q=80');
            color: var(--neon-red);
            animation: alarm-pulse 0.8s infinite alternate;
        }
        body.dead .overlay { background-color: rgba(50, 0, 0, 0.8); }
        
        @keyframes alarm-pulse {
            from { box-shadow: inset 0 0 0px var(--neon-red); }
            to { box-shadow: inset 0 0 100px var(--neon-red); }
        }

        /* --- ELEMENTOS VISUALES --- */
        h1.main-score {
            font-size: 3.5rem;
            margin: 10px 0;
            text-shadow: 0 0 10px currentColor;
        }

        .main-icon { font-size: 4rem; margin-bottom: 10px; display: block; }

        .data-panel {
            background: rgba(255,255,255,0.1);
            border: 1px solid currentColor;
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            width: 80%;
            box-shadow: 0 0 15px rgba(0,0,0,0.5);
        }
        
        .risk-meter { font-size: 1.2rem; font-weight: bold; }
        
        /* --- BOTONES --- */
        .btn-container {
            display: flex;
            gap: 10px;
            width: 100%;
            max-width: 400px;
        }

        button {
            flex: 1;
            padding: 20px 10px;
            font-size: 1.1rem;
            margin: 10px 0;
            border: 2px solid currentColor;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            font-family: 'Share Tech Mono', monospace;
            text-transform: uppercase;
            transition: transform 0.1s, box-shadow 0.3s;
        }
        button:active { transform: scale(0.95); }

        .btn-hack { 
            background: linear-gradient(45deg, #000, #004e92); color: var(--neon-blue); border-color: var(--neon-blue);
            box-shadow: 0 0 10px var(--neon-blue);
        }
        .btn-escape { 
            background: linear-gradient(45deg, #000, #11998e); color: var(--neon-green); border-color: var(--neon-green);
            box-shadow: 0 0 10px var(--neon-green);
        }
        .btn-reset { 
            background: transparent; color: white; border: 1px solid white; margin-top: 30px; width: auto; padding: 10px 30px;
        }

        .hidden { display: none !important; }
        .blink { animation: blinker 1s linear infinite; }
        @keyframes blinker { 50% { opacity: 0; } }
    </style>
</head>
<body class="playing">
    <div class="overlay">

        <div id="ui-play">
            <span class="main-icon">üíª</span>
            <p>SISTEMA: HACKEANDO...</p>
            <p>BOT√çN ACUMULADO:</p>
            <h1 id="score" class="main-score">$100</h1>
            
            <div class="data-panel">
                <p>NIVEL DE SEGURIDAD: <span id="level">1</span></p>
                <p class="risk-meter">RIESGO DE DETECCI√ìN: <span id="risk-text">0%</span> <span class="blink">‚ö†Ô∏è</span></p>
            </div>
            
            <div class="btn-container">
                <button class="btn-escape" onclick="plantarse()">üèÉ‚Äç‚ôÇÔ∏è ESCAPAR AHORA</button>
                <button class="btn-hack" onclick="avanzar()">üí∏ HACKEAR M√ÅS</button>
            </div>
        </div>

        <div id="ui-end" class="hidden">
            <span id="end-icon" class="main-icon"></span>
            <h1 id="end-title" class="main-score"></h1>
            <h2 id="end-score"></h2>
            <div class="data-panel">
                <p id="end-msg"></p>
            </div>
            <button class="btn-reset" onclick="reiniciar()">REINICIAR SISTEMA</button>
        </div>

    </div>

    <script>
        let nivel = 1;
        let dinero = 100;
        let juegoActivo = true;

        function actualizarUI() {
            let riesgo = (nivel - 1) * 18; // Aument√© un poco el riesgo para hacerlo m√°s r√°pido
            if(riesgo > 98) riesgo = 98;
            
            document.getElementById('score').innerText = "$" + dinero.toLocaleString();
            document.getElementById('level').innerText = nivel;
            document.getElementById('risk-text').innerText = riesgo + "%";
            
            // Cambiar icono seg√∫n el riesgo
            const icon = document.querySelector('#ui-play .main-icon');
            if (riesgo < 30) icon.innerText = 'üíª';
            else if (riesgo < 60) icon.innerText = 'üîì';
            else icon.innerText = 'üíÄ';
        }

        function avanzar() {
            if (!juegoActivo) return;

            let probabilidadMuerte = (nivel - 1) * 0.18; 
            let suerte = Math.random();

            if (suerte < probabilidadMuerte) {
                morir();
            } else {
                nivel++;
                // Multiplicador de dinero variable para m√°s emoci√≥n
                const multiplicador = [1.5, 1.8, 2.0][Math.floor(Math.random() * 3)];
                dinero = Math.floor(dinero * multiplicador);
                actualizarUI();
            }
        }

        function plantarse() {
            if (!juegoActivo) return;
            finalizarJuego(true);
        }

        function morir() {
            if (navigator.vibrate) navigator.vibrate([500, 100, 500]); // Doble vibraci√≥n
            finalizarJuego(false);
        }

        function finalizarJuego(escapo) {
            juegoActivo = false;
            document.getElementById('ui-play').classList.add('hidden');
            document.getElementById('ui-end').classList.remove('hidden');

            if (escapo) {
                document.body.className = "safe";
                document.getElementById('end-icon').innerText = "ü§ë";
                document.getElementById('end-title').innerText = "¬°ESCAPE EXITOSO!";
                document.getElementById('end-score').innerText = "$" + dinero.toLocaleString();
                document.getElementById('end-msg').innerText = "El dinero est√° seguro. Muestra tu pantalla a los dem√°s.";
            } else {
                document.body.className = "dead";
                document.getElementById('end-icon').innerText = "üöî";
                document.getElementById('end-title').innerText = "¬°ATRAPADO!";
                document.getElementById('end-score').innerText = "$0";
                document.getElementById('end-msg').innerText = "La polic√≠a cibern√©tica te localiz√≥. Perdiste todo el bot√≠n.";
            }
        }

        function reiniciar() {
            nivel = 1;
            dinero = 100;
            juegoActivo = true;
            document.body.className = "playing";
            document.getElementById('ui-play').classList.remove('hidden');
            document.getElementById('ui-end').classList.add('hidden');
            actualizarUI();
        }

        // Iniciar
        actualizarUI();
    </script>
</body>
</html>
