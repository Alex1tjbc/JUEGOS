<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rally del Panadero: De la Semilla al Pastel</title>
    <style>
        :root {
            --primary: #FF9800;
            --success: #4CAF50;
            --locked: #9E9E9E;
            --bg: #FFF3E0;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg);
            margin: 0;
            padding: 20px;
            text-align: center;
        }
        h1 { color: #E65100; margin-bottom: 10px; }
        .progress-container {
            width: 100%;
            background-color: #ddd;
            border-radius: 10px;
            margin-bottom: 20px;
            height: 20px;
            overflow: hidden;
        }
        .progress-bar {
            height: 100%;
            width: 0%;
            background-color: var(--success);
            transition: width 0.5s ease;
        }
        
        /* Grid de Tarjetas */
        .game-board {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-width: 600px;
            margin: 0 auto;
        }

        .card {
            background: white;
            border-radius: 15px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            overflow: hidden;
            border: 2px solid transparent;
            opacity: 0.6;
            transform: scale(0.98);
            transition: all 0.3s ease;
            pointer-events: none; /* Bloqueado por defecto */
            position: relative;
        }

        .card.active {
            opacity: 1;
            transform: scale(1);
            border-color: var(--primary);
            pointer-events: all;
            box-shadow: 0 8px 15px rgba(255, 152, 0, 0.3);
        }

        .card.completed {
            opacity: 1;
            border-color: var(--success);
            background-color: #E8F5E9;
        }

        .card-header {
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3em;
            color: white;
            position: relative;
        }

        /* Estilos visuales para cada etapa (Simulando gr√°ficos con CSS) */
        .stage-1 .card-header { background: linear-gradient(135deg, #795548, #5D4037); } /* Tierra */
        .stage-2 .card-header { background: linear-gradient(135deg, #2196F3, #03A9F4); } /* Agua */
        .stage-3 .card-header { background: linear-gradient(135deg, #FFC107, #FF9800); } /* Trigo */
        .stage-4 .card-header { background: linear-gradient(135deg, #F5F5F5, #BDBDBD); color: #333; } /* Harina */
        .stage-5 .card-header { background: linear-gradient(135deg, #E91E63, #F48FB1); } /* Pastel */

        .card-body {
            padding: 15px;
        }

        .card-title {
            font-size: 1.2em;
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }

        .card-mission {
            font-size: 0.9em;
            color: #666;
            margin-bottom: 15px;
        }

        .btn-action {
            background-color: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-size: 1em;
            cursor: pointer;
            width: 100%;
        }
        
        .btn-action:hover { background-color: #EF6C00; }
        
        .completed .btn-action {
            background-color: var(--success);
            cursor: default;
        }

        .locked-icon {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 1.5em;
        }
        
        /* Modal de Victoria */
        #victoryModal {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0,0,0,0.8);
            justify-content: center;
            align-items: center;
            z-index: 100;
        }
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            animation: popIn 0.5s ease;
        }
        @keyframes popIn { from {transform: scale(0);} to {transform: scale(1);} }

    </style>
</head>
<body>

    <h1>üçû Rally: Del Campo a la Mesa üéÇ</h1>
    <p>¬°Completa los retos f√≠sicos para desbloquear las tarjetas!</p>
    
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <div class="game-board">
        <div class="card stage-1 active" id="card1">
            <div class="card-header">
                üå±
            </div>
            <div class="card-body">
                <div class="card-title">1. LA SIEMBRA</div>
                <div class="card-mission">
                    <strong>Reto F√≠sico:</strong> Punter√≠a.<br>
                    Encesta 3 "semillas" en el cart√≥n de huevos.
                </div>
                <button class="btn-action" onclick="completeStage(1)">¬°Ya sembr√© las semillas!</button>
            </div>
        </div>

        <div class="card stage-2" id="card2">
            <div class="card-header">
                üíß
                <span class="locked-icon">üîí</span>
            </div>
            <div class="card-body">
                <div class="card-title">2. EL RIEGO</div>
                <div class="card-mission">
                    <strong>Reto F√≠sico:</strong> Velocidad.<br>
                    Llena la cubeta transportando agua con la esponja.
                </div>
                <button class="btn-action" onclick="completeStage(2)">Bloqueado</button>
            </div>
        </div>

        <div class="card stage-3" id="card3">
            <div class="card-header">
                üåæ
                <span class="locked-icon">üîí</span>
            </div>
            <div class="card-body">
                <div class="card-title">3. LA COSECHA</div>
                <div class="card-mission">
                    <strong>Reto F√≠sico:</strong> Precisi√≥n.<br>
                    Derriba todas las botellas (trigo) con la pelota.
                </div>
                <button class="btn-action" onclick="completeStage(3)">Bloqueado</button>
            </div>
        </div>

        <div class="card stage-4" id="card4">
            <div class="card-header">
                ü•°
                <span class="locked-icon">üîí</span>
            </div>
            <div class="card-body">
                <div class="card-title">4. EL MOLINO</div>
                <div class="card-mission">
                    <strong>Reto F√≠sico:</strong> Fuerza.<br>
                    ¬°Revienta los globos sent√°ndote en ellos hasta hallar el papel!
                </div>
                <button class="btn-action" onclick="completeStage(4)">Bloqueado</button>
            </div>
        </div>

        <div class="card stage-5" id="card5">
            <div class="card-header">
                üéÇ
                <span class="locked-icon">üîí</span>
            </div>
            <div class="card-body">
                <div class="card-title">5. EL PASTEL</div>
                <div class="card-mission">
                    <strong>Reto F√≠sico:</strong> Equilibrio.<br>
                    Arma la torre de vasos y platos sin que se caiga.
                </div>
                <button class="btn-action" onclick="completeStage(5)">Bloqueado</button>
            </div>
        </div>
    </div>

    <div id="victoryModal">
        <div class="modal-content">
            <h2 style="font-size: 3em;">üèÜ ¬°FELICIDADES! üèÜ</h2>
            <p>Has completado el ciclo del panadero.</p>
            <p style="font-size: 5em;">üéÇ</p>
            <button class="btn-action" onclick="location.reload()">Jugar de Nuevo</button>
        </div>
    </div>

    <script>
        let currentStage = 1;
        const totalStages = 5;

        function completeStage(stageNum) {
            // Solo permitir completar si es la etapa actual
            if (stageNum !== currentStage) return;

            const card = document.getElementById(`card${stageNum}`);
            const btn = card.querySelector('.btn-action');

            // Marcar visualmente como completado
            card.classList.remove('active');
            card.classList.add('completed');
            btn.innerText = "‚úÖ Completado";
            
            // Actualizar barra de progreso
            const progress = (stageNum / totalStages) * 100;
            document.getElementById('progressBar').style.width = `${progress}%`;

            // L√≥gica de victoria o siguiente nivel
            if (stageNum < totalStages) {
                currentStage++;
                unlockStage(currentStage);
            } else {
                showVictory();
            }
        }

        function unlockStage(stageNum) {
            const nextCard = document.getElementById(`card${stageNum}`);
            const btn = nextCard.querySelector('.btn-action');
            const lockIcon = nextCard.querySelector('.locked-icon');

            nextCard.classList.add('active');
            if(lockIcon) lockIcon.style.display = 'none';
            
            // Cambiar texto del bot√≥n seg√∫n la etapa
            const btnTexts = {
                2: "¬°Ya llen√© la cubeta!",
                3: "¬°Trigo cosechado!",
                4: "¬°Encontr√© la harina!",
                5: "¬°Pastel terminado!"
            };
            btn.innerText = btnTexts[stageNum];
        }

        function showVictory() {
            setTimeout(() => {
                document.getElementById('victoryModal').style.display = 'flex';
                // Efecto de confeti simple (simulado)
            }, 500);
        }
    </script>
</body>
</html>
